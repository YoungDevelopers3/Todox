<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Timetable with Checkboxes</title>
    <style>
      body {
        font-family: "Segoe UI", sans-serif;
        background-color: rgb(20, 20, 30);
        color: white;
        margin: 0;
        padding: 0;
      }

      header {
        background-color: rgb(40, 40, 60);
        padding: 20px;
        text-align: center;
        font-size: 1.8em;
        font-weight: bold;
        border-bottom: 2px solid rgb(80, 80, 120);
      }

      .date-today {
        text-align: center;
        font-size: 1.2em;
        margin-top: 10px;
        color: rgb(180, 180, 180);
      }

      .timetable {
        max-width: 800px;
        margin: 30px auto;
        padding: 10px;
      }

      .slot {
        background-color: rgb(30, 30, 50);
        margin: 10px 0;
        padding: 15px;
        border-left: 6px solid rgb(0, 200, 255);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        transition: background 0.3s;
      }

      .slot:hover {
        background-color: rgb(50, 50, 80);
      }

      .left {
        flex: 1;
      }

      .time {
        font-weight: bold;
        color: rgb(100, 255, 200);
        display: block;
      }

      .activity {
        margin-top: 5px;
      }

      .chart-container {
        max-width: 800px;
        margin: 40px auto;
        text-align: center;
      }

      .chart-title {
        font-size: 1.4em;
        margin-bottom: 15px;
        color: rgb(255, 100, 100);
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(30, 1fr);
        gap: 3px;
        justify-content: center;
      }

      .cell {
        width: 15px;
        height: 15px;
        border-radius: 3px;
        background-color: rgb(40, 40, 60);
        transition: background 0.3s;
        cursor: pointer;
      }

      .cell.active {
        background-color: rgb(0, 255, 0);
      }

      input[type="checkbox"] {
        transform: scale(1.3);
        accent-color: rgb(0, 255, 200);
      }

      footer {
        text-align: center;
        padding: 15px;
        color: gray;
      }
    </style>
  </head>
  <body>
    <header>ðŸ“… My Daily Timetable</header>
    <div class="date-today" id="todayDate">ðŸ“†</div>

    <div class="timetable" id="taskList">
      <!-- Tasks will be inserted by JS -->
    </div>

    <div class="chart-container">
      <div class="chart-title">ðŸ“ˆ Productivity Streak (Click to mark)</div>
      <div class="grid" id="streakGrid"></div>
    </div>

    <footer>ðŸ§  Stay consistent. Discipline beats motivation.</footer>

    <script>
      // Show today's date
      const todayEl = document.getElementById("todayDate");
      const today = new Date();
      const options = {
        weekday: "long",
        year: "numeric",
        month: "long",
        day: "numeric",
      };
      todayEl.textContent =
        "ðŸ“† " + today.toLocaleDateString(undefined, options);

      // Task list
      const tasks = [
        ["6:00am â€“ 7:00am", "Wake up, get fresh and ready"],
        ["7:00am â€“ 9:00am", "Stretching and running"],
        ["9:00am â€“ 9:30am", "Calling home"],
        ["9:45am â€“ 10:15am", "Shower"],
        ["10:15am â€“ 11:00am", "Breakfast"],
        ["11:00am â€“ 11:15am", "Walking"],
        ["11:15am â€“ 12:00pm", "Reading books"],
        ["12:00pm â€“ 2:00pm", "LeetCode"],
        ["2:00pm â€“ 3:00pm", "Lunch + Walk"],
        ["3:00pm â€“ 5:00pm", "Product Management"],
        ["5:00pm â€“ 6:00pm", "Dinner + Anjali"],
        ["6:00pm â€“ 12:00am", "DSA Practice"],
      ];

      const taskList = document.getElementById("taskList");

      tasks.forEach((task, i) => {
        const div = document.createElement("div");
        div.className = "slot";

        const leftDiv = document.createElement("div");
        leftDiv.className = "left";
        leftDiv.innerHTML = `<span class="time">${task[0]}:</span><div class="activity">${task[1]}</div>`;

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.checked = localStorage.getItem("task_" + i) === "true";

        checkbox.addEventListener("change", () => {
          localStorage.setItem("task_" + i, checkbox.checked);
        });

        div.appendChild(leftDiv);
        div.appendChild(checkbox);
        taskList.appendChild(div);
      });

      // Productivity grid logic
      const grid = document.getElementById("streakGrid");

      for (let i = 0; i < 30; i++) {
        const cell = document.createElement("div");
        cell.className = "cell";
        cell.addEventListener("click", () => {
          cell.classList.toggle("active");
          saveGrid();
        });
        grid.appendChild(cell);
      }

      function saveGrid() {
        const states = Array.from(grid.children).map((cell) =>
          cell.classList.contains("active") ? 1 : 0
        );
        localStorage.setItem("productivityGrid", JSON.stringify(states));
      }

      function loadGrid() {
        const saved = JSON.parse(localStorage.getItem("productivityGrid"));
        if (!saved) return;
        saved.forEach((val, i) => {
          if (val === 1) grid.children[i].classList.add("active");
        });
      }

      loadGrid();
    </script>
  </body>
</html>
